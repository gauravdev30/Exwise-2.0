<div class="mx-3 mt-3" id="journeymap-content">
  <div class="text-center p-3" style="background-color: #2155a3; font-weight: bolder; color: white;">
    JOURNEY MAP
    <!-- <i class="fa fa-download float-end text-light" aria-hidden="true" style="font-size:26px" (click)="ondownload()"*ngIf="!isLoadingSpin"></i>
    <i class="fa fa-spinner fa-spin float-end text-light" style="font-size:24px" *ngIf="isLoadingSpin"></i> -->
    <i class="fa fa-download float-end text-light" aria-hidden="true" style="font-size:26px" [matMenuTriggerFor]="menu"
      *ngIf="!isLoadingSpin"></i>
    <i class="fa fa-spinner fa-spin float-end text-light" style="font-size:24px" *ngIf="isLoadingSpin"></i>

    <mat-menu #menu="matMenu">
      <div mat-menu-item (click)="ondownload()" *ngIf="isCpoc!==true">Download Excel</div>
      <div mat-menu-item (click)="downloadPDF()">Download PDF</div>
    </mat-menu>

  </div>
  <section class=" mb-5" *ngIf="!isLoading" style="height: 100%;padding-bottom: 5%;">
    <div class="row justify-content-center mt-4">
      <div class="col-md-5 col-lg-5" >
        <div class="card shadow-sm cardheight" style="border: 2px solid gainsboro">
          <h5 class="card-title mb-2 fw-bold text-center">Response Completion Rate</h5>
          <div class="card-body my-5">

            <canvas baseChart [data]="barChartData" [options]="barChartOptions" chartType="bar">
            </canvas>
          </div>
        </div>
      </div>
      <div class="col-md-7 col-lg-7" >
        <div class="card shadow-sm h-100" style="border: 2px solid gainsboro">
          <h5 class="card-title fw-bold text-center">EX Foundations Satisfaction v EX Foundations Reality and
            Quality</h5>
            <!-- <div class="ms-2">
              <button (click)="resetChartZoom(barChart)" class="border-0 mb-2 rounded py-1 px-2 text-white blue-color">Reset
                zoom</button>
            </div> -->
          <div class="card-body">
            <canvas id="barChartCanvas">{{ barChart }}</canvas>
          </div>
        </div>
      </div>
    </div>

    <div class="row justify-content-center info-card" >
      <div class="col-2 flex-grow-1" *ngFor="let stage of survey">
        <div class="card" (click)="clickOnStage(stage)" [ngClass]="{'activeTab': stage?.clicked}">
          <div class="card-body">
            <div class="row">
              <div class="col align-self-center">
                <!-- <h5 class="card-title  fs-6 text-uppercase fw-normal mb-2">All</h5> -->
                <h5 class="card-title fs-6 fw-normal">{{ stage?.stageName }}</h5>
              </div>
              <div class="col-auto">
                <circle-progress [percent]="stage?.stageScore" [radius]="35" [outerStrokeWidth]="10"
                  [innerStrokeWidth]="10" [outerStrokeColor]="'#2155a3'" [innerStrokeColor]="'#069DE0'"
                  [animation]="true" [showSubtitle]="false" [clockwise]="true" [showUnits]="true"
                  [animationDuration]="300"></circle-progress>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- <div class="row justify-content-center info-card">
      <div class="col-2 flex-grow-1" *ngFor="let stage of survey">
        <div class="card1" (click)="clickOnStage(stage)" [ngClass]="{'activeTab': stage?.clicked}">
          <div class="card-body">
            <div class="row">
              <div class="col align-self-center">
                <h5 class="card-title fs-6 text-uppercase fw-normal mb-2 text-center">
                  {{ stage?.stageName }}
                </h5>
              </div>
              <div class="col-auto">
                <circle-progress [percent]="stage?.stageScore" [radius]="35" [outerStrokeWidth]="10"
                  [innerStrokeWidth]="10" [outerStrokeColor]="'#2155a3'" [innerStrokeColor]="'#069DE0'"
                  [animation]="true" [showSubtitle]="false" [clockwise]="true" [showUnits]="true"
                  [animationDuration]="300"></circle-progress>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div> -->

    <div class="row justify-content-center" >
      <div class="col-md-5 mb-2">
        <div class="card shadow-sm h-100" style="border: 2px solid gainsboro">

          <div class="text-center card-title mb-2"> {{stageName}} EX Foundations Satisfaction v EX Foundations Reality
            and Quality</div>
           <!-- <div>
            <button (click)="resetChartZoom(barChart2)" class="border-0 rounded ms-2 py-1 px-2 text-white blue-color">Reset
              zoom</button>
           </div> -->
          <div class="card-body my-5">

            <canvas id="barChartCanva2">{{ barChart2 }}</canvas>
          </div>
        </div>
      </div>
      <div class="col-md-7  mb-2">
        <div class="card shadow-sm h-100" style="border: 2px solid gainsboro">
          <div class="text-center card-title mb-2"> {{stageName}} Touchpoints</div>
          <div class="card-body">

            <canvas class="w-100 " baseChart [data]="efficiencyData2" [options]="efficiencyOptions"
              [plugins]="efficiencyPlugins" [legend]="efficiencyLegend" [type]="'bar'">
            </canvas>

          </div>
        </div>
      </div>
      <div class="col-md-6  mb-2">
        <div class="card shadow-sm h-100" style="border: 2px solid gainsboro">
          <div class="text-center card-title mb-2"> {{stageName}} Touchpoint Efficiencies Automation</div>
          <div class="card-body">

            <canvas class="w-100" baseChart [data]="efficiencyData3" [options]="efficiencyOptions"
              [plugins]="efficiencyPlugins" [legend]="efficiencyLegend" [type]="'bar'">
            </canvas>

          </div>
        </div>
      </div>
      <div class="col-md-6  mb-2 ">
        <div class="card shadow-sm h-100" style="border: 2px solid gainsboro">
          <div class="text-center card-title mb-2"> {{stageName}} Touchpoint Efficiencies System</div>
          <div class="card-body">

            <canvas class="w-100" baseChart [data]="efficiencyData4" [options]="efficiencyOptions"
              [plugins]="efficiencyPlugins" [legend]="efficiencyLegend" [type]="'bar'">
            </canvas>

          </div>
        </div>
      </div>
      <div class="col-md-12 mb-2" style="height: 400px;">
        <div class="card shadow-sm h-100" style="border: 2px solid gainsboro">
          <div class="text-center"> {{stageName}} Touchpoint Internal Ownership</div>
          <div class="card-body">
            <canvas class="w-100" baseChart [data]="efficiencyData" [options]="efficiencyOptions"
              [plugins]="efficiencyPlugins" [legend]="efficiencyLegend" [type]="'bar'">
            </canvas>
          </div>
        </div>
      </div>
      <div class="col-md-12">
        <div class="card shadow-sm h-100" style="border: 2px solid gainsboro">
          <div class="text-center"> {{stageName}} Questions</div>
          <div class="card-body">
            <div id="chart">
              <apx-chart [series]="chartOptions?.series" [chart]="chartOptions?.chart"
                [dataLabels]="chartOptions?.dataLabels" [plotOptions]="chartOptions?.plotOptions"
                [xaxis]="chartOptions?.xaxis" [stroke]="chartOptions?.stroke" [fill]="chartOptions?.fill"
                [title]="chartOptions?.title" [tooltip]="chartOptions?.tooltip" [legend]="chartOptions?.legend"
                [colors]="chartOptions?.colors"></apx-chart>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-12">
        <div class="card h-100">

        </div>
      </div>
    </div>
  </section>
  <div class="text-center my-5">
    <i *ngIf="isLoading" class="fa fa-spinner fa-spin" style="font-size: 64px; color: #2155a3"></i>
  </div>
</div>